
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="GB2312">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes" />
    <meta name="shenma-site-verification" content="bb3eb50ad4663a1fcb6d8d721d5e68ba_1584820310">
    <link rel="icon" href="./img/logo.ico">
    <title>m3u8视频在线播放器</title>
    <meta name="keywords" content="m3u8视频在线播放，m3u8在线测试，m3u8播放器，mu在线播放器">
    <meta name="description" content="为广大小伙伴提供一个m3u8视频在线播放的环境~">
    <style>
    	html,body{height:100%;}
        #footer{
                height: 20px;
                width: 100%;
                margin-top:10px;
                text-align: center;
                color: white;
                font-family: Arial;
                font-size: 13px;
              }
        .logo img{height:32px;margin-top:-4px}
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css">
    <!--https://www.bootcdn.cn/video.js/-->
    <link href="https://cdn.bootcss.com/video.js/7.6.5/alt/video-js-cdn.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/video.js/6.6.2/video.js"></script>
    <!--https://www.bootcdn.cn/videojs-contrib-hls/-->
    <script src="https://cdn.bootcss.com/videojs-contrib-hls/5.15.0/videojs-contrib-hls.min.js"></script>
    <script>
        function ChangeM3u8(){
            var play = document.getElementById('video-url').value
            var url = location.href
            url = url.split('?')[0]+'?play='+play
            location.href = url
        }
        function QueryString(qs){
            var url = location.href
            url = url.replace('?','?&').split('&')[-1]
            var re = ''
            for(var i=1;i < url.length;i++){
                if(url[i].indexOf(qs+'=')==0){
                    re = url[i].replace(qs+'=','')
                    break
                }
            }
            return re
        }
        function IsPC(){
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                        "SymbianOS", "Windows Phone",
                        "iPad", "iPod"];
            var flag = true;
            for (var v = 0; v < Agents.length; v++) {
                if (userAgentInfo.indexOf(Agents[v]) > 0) {
                    flag = false;
                    break;
                }
            }
            return flag;
        }
    </script>
    
    <script>
        (function(){
        var src = "https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba";
        document.write('<script src="' + src + '" id="sozz"><\/script>');
        })();
    </script>
    <script>
        (function(){
        var src = "https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba";
        document.write('<script src="' + src + '" id="sozz"><\/script>');
        })();
    </script>

</head>
<body style="background-color:#16161A;" background="img/bg.png">
<div style="background:#2A2A32;height:7%;padding-left:3%;display:flex;align-items:center;" >
    <img src="img/player.ico" alt=""class="mr-2"><a id = "webhead" class = "navbar-brand logo" style="color:white;font-size:1.3em" href="">M3U8播放器</a>
</div>
<div id="videodiv" style="height:25%;width:auto;margin-top:13px;margin-left:10px;margin-right:10px;background:#16161A">
    <video id="myVideo" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="auto"  width="" height="" data-setup='{}'>    
        <source id="source" src="https://baikevideo.cdn.bcebos.com/media/mda-OgKIAVGwqTr85ead/68be67d3fa6a364f4ca91d1774f40de8_1280x720_1525000.m3u8"  type="application/x-mpegURL">
    </video>
<div>
<div class="input-group my-3">
    <input id="video-url" required="" name="play" type="text" class="form-control nice" placeholder="输入 M3U8 URL 地址" value="https://baikevideo.cdn.bcebos.com/media/mda-OgKIAVGwqTr85ead/68be67d3fa6a364f4ca91d1774f40de8_1280x720_1525000.m3u8" aria-describedby="button-addon2">
    <div class="input-group-append">
        <button class="btn btn-dark js-play border-0" type="button" onclick="ChangeM3u8()"><img src="img/play.png" height="24">
        </button>
    </div>
    <div id ='introduction' style="color:white;margin-top:40px;">
        <a href="https://www.jianshu.com/p/e97f6555a070" style="color:Lightskyblue">
            <h6 class="font-weight-bold">M3U8文件格式</h6>
        </a>
        <p><strong>M3U8</strong>文件是指UTF-8编码格式的M3U文件。M3U文件是记录了一个索引纯文本文件，打开它时播放软件并不是播放它，而是根据它的索引找到对应的音视频文件的网络地址进行在线播放。</p>
        <p><strong>M3U</strong>是一种播放多媒体列表的文件格式，它的设计初衷是为了播放音频文件，比如MP3，但是越来越多的软件现在用来播放视频文件列表，M3U也可以指定在线流媒体音频源。很多播放器和软件都支持M3U文件格式。</p>
        
    </div>
</div>
<div id="footer">Copyright © 2021 hmc</div>
</body>
<script>    
    if(IsPC()){
        document.getElementById('videodiv').style="margin:0 auto;height:88%;width:78%;margin-top:17px;"
        document.getElementById('webhead').text += ""
    }
    var play = QueryString('play')
    if(play != ''){
        document.getElementById('video-url').value = play
        document.getElementById('source').src = play
    }
    var width = document.getElementById('videodiv').offsetWidth
    var height = document.getElementById('videodiv').offsetHeight
    document.getElementById('myVideo').setAttribute('width',width)
    document.getElementById('myVideo').setAttribute('height',height)
    var total_h = document.body.clientHeight
    var footer_h = document.getElementById('footer').offsetTop 
    document.getElementById('footer').style.marginTop =  (total_h-footer_h-60)+"px"
    // videojs 简单使用  
    var myVideo = videojs('myVideo',{
        bigPlayButton : true, 
        textTrackDisplay : false, 
        posterImage: false,
        errorDisplay : true,
        controlBar: {volumePanel:{inline:false}},
        playbackRates: [0.5,1,1.25,1.5,2],
    },function(){
        this.on('error',function(){
            myVideo.errorDisplay.close()
            alert('地址解析错误 \n    请检查链接是否正确')
        }) 
    }
    )
    myVideo.play() // 视频播放
    myVideo.pause() // 视频暂停
    var vol = 0.1;  //1代表100%音量，每次增减0.1
    var time = 10; //单位秒，每次增减10秒
    document.onkeyup = function (event) {//键盘事件
        var e = event || window.event || arguments.callee.caller.arguments[0];
        if (e && e.keyCode === 37) {
            // 按 向左键
            c_time = myVideo.currentTime()
            if(c_time-time > 0){
                myVideo.currentTime(c_time-time)
            }else{
                myVideo.currentTime(0)
            }
            return false;
        }else if (e && e.keyCode === 39) {
            // 按 向右键
            c_time = myVideo.currentTime()
            d_time = myVideo.duration();
            if(c_time+time > d_time){
                myVideo.currentTime(d_time)
            }else{
                myVideo.currentTime(c_time+time)
            }
            return false;
        }else if (e && e.keyCode === 38) {
            // 按 向上键
            c_volume = myVideo.volume()
            if(c_volume+vol > 1){
                myVideo.volume(1)
            }else{
                myVideo.volume(c_volume+vol)
            }
            return false;
        }else if (e && e.keyCode === 40) {
            // 按 向下键
            c_volume = myVideo.volume()
            if(c_volume-vol < 0){
                myVideo.volume(0)
            }else{
                myVideo.volume(c_volume-vol)
            }
            return false;
        }else if (e && e.keyCode === 32) {
            // 按 空格键
            if (myVideo.paused()){
                myVideo.play()
            }else{
                myVideo.pause()
            }
            return false;
        }

    }
</script>
</html>

